<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/layout/header::oceanHead('song')}"></head>
<style>

	table {
		font-size: 24px;
	}

	tr,th {
		text-align: center;
	}
	th {
        vertical-align: top;
    }

</style>
</head>
<script>
	function fnSportifySearch(){
	    $('#searchBtn').click(function() {	    	
	        $.ajax({
	            url: '/song/spotifysearch.do',
	            type: 'GET',
	            data: 'q=' + $('#q').val(),
	            dataType: 'json',
	            success: function(resData) {
					$('#result').empty();
	                $('#result').append('검색결과 : ' + resData.total);
					$('#result').append('<table>');
					$('#result').append('<tr><th>title</th><th>singer</th><th>image</th><th>preview</th></tr>');
	                $.each(resData.songList, function(i, song){
		
					var row = '<tr>';
                    row += '<td>' + song.title + '</td>';
                    row += '<td>' + song.singer + '</td>';
                    row += '<td><img src="' + song.imgUrl + '" width="160" height="120"></td>';
                    row += '<td>' + song.preview + '</td>';
                    row += '</tr>';
                    $('#result').append(row);			
		                
                
                	$('#result').append('</table>');      			
					})
	            }
	        });
	    });	
	}
	
	$(function(){
		fnSportifySearch();
	})
</script>

<body>
    <h1>Spotify Search</h1>

	<input type="text" id="q">
    <button id="searchBtn">Search</button>
    <div id="result"></div>

</body>
</html>
